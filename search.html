<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Search | Standard Covoiturage</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="The &amp;#34;standard covoiturage&amp;#34; is intended to describe reference methods for making data available, carrying out transactions and, more generally, enabling the exchange of services between carpooling operators and MaaS platforms.">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/standard-covoiturage/assets/css/0.styles.9248ae60.css" as="style"><link rel="preload" href="/standard-covoiturage/assets/js/app.bbb2d0fd.js" as="script"><link rel="preload" href="/standard-covoiturage/assets/js/2.90049311.js" as="script"><link rel="preload" href="/standard-covoiturage/assets/js/14.ab05f61e.js" as="script"><link rel="preload" href="/standard-covoiturage/assets/js/3.5cb8b966.js" as="script"><link rel="prefetch" href="/standard-covoiturage/assets/js/10.e829d41f.js"><link rel="prefetch" href="/standard-covoiturage/assets/js/11.6c3726b0.js"><link rel="prefetch" href="/standard-covoiturage/assets/js/12.61e9daef.js"><link rel="prefetch" href="/standard-covoiturage/assets/js/13.1f5c303d.js"><link rel="prefetch" href="/standard-covoiturage/assets/js/15.a67b706a.js"><link rel="prefetch" href="/standard-covoiturage/assets/js/4.02e2c2ac.js"><link rel="prefetch" href="/standard-covoiturage/assets/js/5.040decdc.js"><link rel="prefetch" href="/standard-covoiturage/assets/js/6.06438485.js"><link rel="prefetch" href="/standard-covoiturage/assets/js/7.03c59953.js"><link rel="prefetch" href="/standard-covoiturage/assets/js/8.3d31a9ef.js"><link rel="prefetch" href="/standard-covoiturage/assets/js/9.80032809.js">
    <link rel="stylesheet" href="/standard-covoiturage/assets/css/0.styles.9248ae60.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/standard-covoiturage/" class="home-link router-link-active"><!----> <span class="site-name">Standard Covoiturage</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/fabmob/standard-covoiturage" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub repository
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://fabmob.github.io/standard-covoiturage/specification.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  OpenAPI specification
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/fabmob/standard-covoiturage" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub repository
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://fabmob.github.io/standard-covoiturage/specification.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  OpenAPI specification
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/standard-covoiturage/" aria-current="page" class="sidebar-link">Introduction</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/standard-covoiturage/#goals" class="sidebar-link">Goals</a></li><li class="sidebar-sub-header"><a href="/standard-covoiturage/#drafts-and-final-versions" class="sidebar-link">Drafts and final versions</a></li><li class="sidebar-sub-header"><a href="/standard-covoiturage/#functional-perimeter" class="sidebar-link">Functional perimeter</a></li><li class="sidebar-sub-header"><a href="/standard-covoiturage/#standard-compliance" class="sidebar-link">Standard compliance</a></li></ul></li><li><a href="/standard-covoiturage/search.html" aria-current="page" class="active sidebar-link">Search</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/standard-covoiturage/search.html#search-for-single-journeys" class="sidebar-link">Search for single journeys</a></li><li class="sidebar-sub-header"><a href="/standard-covoiturage/search.html#search-for-regular-trips-and-associated-journeys" class="sidebar-link">Search for regular trips and associated journeys</a></li></ul></li><li><a href="/standard-covoiturage/booking.html" class="sidebar-link">Booking</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/standard-covoiturage/booking.html#integrated-booking-by-api" class="sidebar-link">Integrated booking by API</a></li><li class="sidebar-sub-header"><a href="/standard-covoiturage/booking.html#delegated-booking-by-deep-link" class="sidebar-link">Delegated booking by deep link</a></li></ul></li><li><a href="/standard-covoiturage/authentication.html" class="sidebar-link">Authentication across platforms (&quot;MaaS Connect&quot;)</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="search"><a href="#search" class="header-anchor">#</a> Search</h1> <h2 id="search-for-single-journeys"><a href="#search-for-single-journeys" class="header-anchor">#</a> Search for single journeys <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>draft</span></h2> <p>Search functionalities cover two different possible use cases: a driver can
search for passengers (so, he searches a <code>PassengerJourney</code>), or a passenger
can search for a driver (looking for a <code>DriverJourney</code>).</p> <p>Each search has its dedicated endpoint and return value. The carpooling
operator can implement one or the other or both following API endpoints:</p> <ul><li><code>GET /driver_journeys</code> and/or</li> <li><code>GET /passenger_journeys</code></li></ul> <div class="spinner" style="background:rgb(66, 185, 131);" data-v-1bbcb91a></div><p>No user information is required to perform a search.</p> <div class="custom-block tip"><p class="custom-block-title">Round trips</p> <p>To search for a round trip, it is up to the MaaS platform to perform the
searches for the outward and return journeys separately.</p></div> <div class="custom-block tip"><p class="custom-block-title">Regular trips</p> <p>Searching for regular trips has its own specific workflow presented in
<a href="#search-for-regular-trips-and-associated-journeys">a dedicated section</a>
below.</p></div> <h3 id="the-journey-objects"><a href="#the-journey-objects" class="header-anchor">#</a> The <code>*Journey</code> objects</h3> <p>The <code>*Journey</code> objects come in two flavors, the <code>DriverJourney</code> and the
<code>PassengerJourney</code>. Passengers looking for a ride will search for a
<code>DriverJourney</code>, and drivers looking for passengers will search for a
<code>PassengerJourney</code>.</p> <p>The <code>*Journey</code> object provides the necessary information to procede to the
booking phase (TODO link). It gives the start and end positions of the shared
journey, the expected start time and duration, the carpooling operator and
information on the driver or passenger.</p> <p>If booking by deep link is supported, the link is shared along the journey
information in the response's attribute <code>webUrl</code>. If integrated booking by API
is supported, then the journey information plus the <code>price</code> attribute enable
to make a booking request.</p> <p>The <code>price</code> is to be interpreted as the actual amount expected by the
carpooling operator in case of booking by API, and a price estimate (subject
to change) in case of bookingn via deep link.</p> <h3 id="technical-specification"><a href="#technical-specification" class="header-anchor">#</a> Technical specification</h3> <p>The carpooling operator MUST return at most <code>count</code> matching results, or all
matching results if <code>count</code> parameter is not specified. All returned results
MUST match the query parameters. If the parameter <code>count</code> is specified, the
carpooling operator SHOULD return in priority the most relevant results. The
measure of relevance is left to the discretion of the carpooling operator.</p> <p>The <code>id</code> attribute of the response MUST be unique for a given carpooling
operator (same <code>operator</code> attribute) among all journeys (whether
<code>PassengerJourney</code> or <code>DriverJourneys</code>).</p> <p>If no price estimate is possible, a price with <code>type</code> &quot;UNKNOWN&quot; SHOULD be
returned. A journey with an unknown price is not available for integrated
booking by API. If the <code>type</code> is &quot;PAYING&quot;, then the attributes <code>amount</code> and
<code>currency</code> are required.</p> <h2 id="search-for-regular-trips-and-associated-journeys"><a href="#search-for-regular-trips-and-associated-journeys" class="header-anchor">#</a> Search for regular trips and associated journeys <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>draft</span></h2> <p>A regular trip is a recurring trip that is repeated from one week to another.</p> <p>Searching for regular trips can be done with specific endpoints, which are the
counterparts of the <code>GET /passenger_journeys</code> and <code>GET /driver_journeys</code>. The
carpooling operator can implement one or the other or both API endpoints:</p> <ul><li><code>GET /driver_regular_trips</code> and/or</li> <li><code>GET /passenger_regular_trips</code></li></ul> <p>The API works by searching journeys that start around the same time of the day
at given weekdays. The query parameters therefore specify an additionnal
required <code>departureTimeOfDay</code> attribute, and an optional <code>departureWeekdays</code>
attribute compared to the single journey search (which defaults to all days of
the week).</p> <p>Return values may only cover partially the request on the <code>departureWeekdays</code>.</p> <h3 id="the-regulartrip-objects"><a href="#the-regulartrip-objects" class="header-anchor">#</a> The <code>*RegularTrip</code> objects</h3> <p>Again, two slightly different objects can be returned depending on the
endpoint used : a <code>DriverRegularTrip</code> or a <code>PassengerRegularTrip</code>.</p> <p>These return objects share a large amount of information with the <code>*Journey</code>
object.</p> <p>But instead of giving information on a single start time, they offer a
<code>schedules</code> attribute that details the decomposition of the regular trip into
single journeys. Schedule information combined with regular trip attributes
give the same level of information for the single journeys than a simple
search would, allowing to continue to the booking phase.</p> <p>For booking via deep link, an additional <code>webUrl</code> attribute is available, to
facilitate booking journeys in bulk and avoid the bad user experience of
having to go back and forth between the MaaS the carpooling apps as many times
as there are journeys to book.</p> <div class="custom-block tip"><p class="custom-block-title">More sophisticated regular trips</p> <p>It is up to the MaaS platform to assemble the results of several calls into a
more sophisticated regular journey.</p> <p>For instance, a varying <code>departureTimeOfDay</code> depending on week day, or
different schedules on alternating weeks, can be queried with a large
<code>timeDelta</code> and post-filtering, or with several calls with different
<code>departureTimeOfDay</code> and concatenation.</p></div> <h3 id="technical-specification-2"><a href="#technical-specification-2" class="header-anchor">#</a> Technical specification</h3> <p>The carpooling operator MUST return at most <code>count</code> matching results, or all
matching results if <code>count</code> parameter is not specified. All returned results
MUST match the query parameters.</p> <p>A regular trip matches the <code>departureWeekdays</code> and <code>departureTimeOfDay</code> if
<em>any</em> journey of the regular trip matches the time and day constraint and
starts between <code>minDepartureDate</code> and <code>maxDepartureDate</code> (included).</p> <p>The returned results may not reach the <code>maxDepartureDate</code> because of the
limited forecasting horizon of the carpooling operator.</p> <p>If the carpooling operator supports booking by deep link, the <code>webUrl</code>
attribute in the response SHOULD link to a page giving an overview of the
regular trips (e.g. a &quot;driver&quot; page) and allowing to continue the process of
regular trips by the user.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/standard-covoiturage/" class="prev router-link-active">
        Introduction
      </a></span> <span class="next"><a href="/standard-covoiturage/booking.html">
        Booking
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/standard-covoiturage/assets/js/app.bbb2d0fd.js" defer></script><script src="/standard-covoiturage/assets/js/2.90049311.js" defer></script><script src="/standard-covoiturage/assets/js/14.ab05f61e.js" defer></script><script src="/standard-covoiturage/assets/js/3.5cb8b966.js" defer></script>
  </body>
</html>
