<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Search | Standard Covoiturage</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="The &amp;#34;standard covoiturage&amp;#34; is intended to describe reference methods for making data available, carrying out transactions and, more generally, enabling the exchange of services between carpooling operators and MaaS platforms.">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/standard-covoiturage/assets/css/0.styles.c3e3b51d.css" as="style"><link rel="preload" href="/standard-covoiturage/assets/js/app.bb032a39.js" as="script"><link rel="preload" href="/standard-covoiturage/assets/js/2.3c2e6582.js" as="script"><link rel="preload" href="/standard-covoiturage/assets/js/13.57bfb6e0.js" as="script"><link rel="prefetch" href="/standard-covoiturage/assets/js/10.f10e78e4.js"><link rel="prefetch" href="/standard-covoiturage/assets/js/11.79f0e56c.js"><link rel="prefetch" href="/standard-covoiturage/assets/js/12.03864b75.js"><link rel="prefetch" href="/standard-covoiturage/assets/js/3.ab767734.js"><link rel="prefetch" href="/standard-covoiturage/assets/js/4.0d286627.js"><link rel="prefetch" href="/standard-covoiturage/assets/js/5.106fd5a0.js"><link rel="prefetch" href="/standard-covoiturage/assets/js/6.29f38f88.js"><link rel="prefetch" href="/standard-covoiturage/assets/js/7.d80dae7d.js"><link rel="prefetch" href="/standard-covoiturage/assets/js/8.31ff967d.js"><link rel="prefetch" href="/standard-covoiturage/assets/js/9.e041fa46.js">
    <link rel="stylesheet" href="/standard-covoiturage/assets/css/0.styles.c3e3b51d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/standard-covoiturage/" class="home-link router-link-active"><!----> <span class="site-name">Standard Covoiturage</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/fabmob/standard-covoiturage" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub repository
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/fabmob/standard-covoiturage" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub repository
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/standard-covoiturage/" aria-current="page" class="sidebar-link">Introduction</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/standard-covoiturage/#goals" class="sidebar-link">Goals</a></li><li class="sidebar-sub-header"><a href="/standard-covoiturage/#drafts-and-final-versions" class="sidebar-link">Drafts and final versions</a></li><li class="sidebar-sub-header"><a href="/standard-covoiturage/#functional-perimeter" class="sidebar-link">Functional perimeter</a></li><li class="sidebar-sub-header"><a href="/standard-covoiturage/#standard-compliance" class="sidebar-link">Standard compliance</a></li></ul></li><li><a href="/standard-covoiturage/search.html" aria-current="page" class="active sidebar-link">Search</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/standard-covoiturage/search.html#search-for-single-journeys" class="sidebar-link">Search for single journeys</a></li><li class="sidebar-sub-header"><a href="/standard-covoiturage/search.html#search-for-regular-trips-and-associated-journeys" class="sidebar-link">Search for regular trips and associated journeys</a></li></ul></li><li><a href="/standard-covoiturage/authentication.html" class="sidebar-link">Authentication across platforms (&quot;MaaS Connect&quot;)</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="search"><a href="#search" class="header-anchor">#</a> Search</h1> <div class="language-mermaid extra-class"><pre class="language-mermaid"><code><span class="token keyword">sequenceDiagram</span>
Alice<span class="token arrow operator">-&gt;</span>John<span class="token operator">:</span> Hello John, how are you?
<span class="token keyword">loop</span> every minute
    John<span class="token arrow operator">--&gt;</span>Alice<span class="token operator">:</span> Great!
<span class="token keyword">end</span>
</code></pre></div><h2 id="search-for-single-journeys"><a href="#search-for-single-journeys" class="header-anchor">#</a> Search for single journeys</h2> <h3 id="introduction"><a href="#introduction" class="header-anchor">#</a> Introduction</h3> <p>Search functionalities cover two different possible use cases: a driver can
search for passengers (so, he searches a <code>passenger_journey</code>), or a passenger
can search for a driver (looking for a <code>driver_journey</code>).</p> <p>Each search has its dedicated endpoint and return value. The carpooling
operator can implement one or the other or both following API endpoints:</p> <ul><li><code>GET /driver_journeys</code> and/or</li> <li><code>GET /passenger_journeys</code></li></ul> <div class="language-mermaid extra-class"><pre class="language-mermaid"><code><span class="token keyword">sequenceDiagram</span>
    <span class="token keyword">participant</span> U as User
    <span class="token keyword">participant</span> M as MaaS
    <span class="token keyword">participant</span> T as TO
    U<span class="token arrow operator">-&gt;&gt;</span>M<span class="token operator">:</span> Search for journeys
    <span class="token keyword">rect</span> rgb<span class="token text string">(255, 255, 236)</span>
    M<span class="token arrow operator">-&gt;&gt;</span>T<span class="token operator">:</span> GET /driver_journeys <span class="token text string">(or /passenger_journeys)</span>
    T<span class="token arrow operator">--&gt;&gt;</span>M<span class="token operator">:</span> DriverJourneys[] <span class="token punctuation">(</span>or PassengerJourneys[]<span class="token punctuation">)</span>
    <span class="token keyword">end</span>
    M<span class="token arrow operator">--&gt;&gt;</span>U<span class="token operator">:</span> Show results
</code></pre></div><p>The search results are queried by the MaaS platform to the carpooling operator
in a single API call, providing all relevant query informations. The minimum
required information is the starting and arrival places.</p> <p>In particular, no user information is required to perform a search.</p> <p>The search provides the necessary information to procede to the booking phase
(described in other sections). If booking by deep link is supported, the link
is shared along the journey information in the response's attribute <code>webUrl</code>.<br>
If integrated booking by API is supported, then the journey information plus
the <code>price</code> attribute enable to make a booking request.</p> <h3 id="the-case-of-a-round-trip"><a href="#the-case-of-a-round-trip" class="header-anchor">#</a> The case of a round trip</h3> <p>If the case of a round trip, it is up to the MaaS platform to perform the
searches for the outward and return journeys separately.</p> <h3 id="the-case-of-regular-trips"><a href="#the-case-of-regular-trips" class="header-anchor">#</a> The case of regular trips</h3> <p>Searching for regular trips has its own specific workflow presented in
<a href="https://github.com/fabmob/standard-covoiturage/blob/spec_search/standard-covoiturage_specification.md#3112-search-for-regular-trips-and-associated-journeys" target="_blank" rel="noopener noreferrer">a dedicated section<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h3 id="technical-specification"><a href="#technical-specification" class="header-anchor">#</a> Technical specification</h3> <p>The carpooling operator MUST return at most <code>count</code> matching results, or all
matching results if <code>count</code> parameter is not specified. All returned results
MUST match the query parameters. If the parameter <code>count</code> is specified, the
carpooling operator SHOULD return in priority the most relevant results. The
measure of relevance is left to the discretion of the carpooling operator.</p> <p>The <code>id</code> attribute of the response MUST be unique for a given carpooling
operator (same <code>operator</code> attribute) among all journeys (<code>passengerJourneys</code>
and <code>driverJourneys</code>).</p> <p>The meaning of <code>price</code> attribute of the response SHOULD be a price estimation,
if no estimation is possible, a price with <code>type</code> &quot;UNKNOWN&quot; SHOULD be
returned. If the <code>type</code> is &quot;PAYING&quot;, then the attributes <code>amount</code> and
<code>currency</code> are required.</p> <p>In the case of integrated booking by API, this estimation is to be taken as
the actual amount expected by the carpooling operator. Therefore, the
carpooling operator SHOULD return a <code>price</code> of type &quot;FREE&quot; or &quot;PAYING&quot; to
allow the MaaS platform to book by API.</p> <h2 id="search-for-regular-trips-and-associated-journeys"><a href="#search-for-regular-trips-and-associated-journeys" class="header-anchor">#</a> Search for regular trips and associated journeys</h2> <h3 id="general-workflow"><a href="#general-workflow" class="header-anchor">#</a> General workflow</h3> <p>Endpoints implemented by the carpooling operator:</p> <ul><li><code>GET /driver_regular_trips</code> and/or</li> <li><code>GET /passenger_regular_trips</code></li></ul> <p>These are the counterparts of the <code>GET \passenger_journeys</code> and <code>GET \driver_journeys</code> endpoints, but for searching regular trips. The carpooling
operator can implement one or the other or both API endpoints.</p> <p>A regular trip is a recurring trip that is repeated from one week to another.<br>
The API allows for searching regular trips that start around the same time of
the day at given week days. The query parameters therefore specify an
additionnal required <code>departureTimeOfDay</code>, and an optional <code>departureWeekdays</code>
compared to the single journey search.</p> <p>The return values offer a <code>schedules</code> attribute that details the decomposition
of the regular trip into single journeys. All attributes combined give the
same level of information for the single journeys than a simple search would.</p> <p>Again, the response gives all the necessary elements to procede with the
booking phase as with single journey objects, but with an additionnal optional
<code>webUrl</code> attribute, that allows for a better user experience than having to go
back and forth between the MaaS the carpooling apps as many times as there are
journeys to book.</p> <h3 id="workflow-for-more-sophisticated-regular-journeys"><a href="#workflow-for-more-sophisticated-regular-journeys" class="header-anchor">#</a> Workflow for more sophisticated regular journeys</h3> <p>It is up to the MaaS platform to assemble the results of several calls into a
more sophisticated regular journey. For instance, a varying
<code>departureTimeOfDay</code> depending on week day, or different schedules on
alternating weeks, can be queried with a large <code>timeDelta</code> and post-filtering,
or with several calls with different <code>departureTimeOfDay</code> and concatenation.</p> <h3 id="technical-specification-for-searching-for-regular-journeys"><a href="#technical-specification-for-searching-for-regular-journeys" class="header-anchor">#</a> Technical specification for searching for regular journeys</h3> <p>The carpooling operator MUST return at most <code>count</code> matching results, or all
matching results if <code>count</code> parameter is not specified. All returned results
MUST match the query parameters.</p> <p>A regular trip matches the <code>departureWeekdays</code> and <code>departureTimeOfDay</code> if
<em>any</em> journey of the regular trip matches the time and day constraint and
starts between <code>minDepartureDate</code> and <code>maxDepartureDate</code> (included).</p> <p>The returned results may not reach the <code>maxDepartureDate</code> because of the
limited forecasting horizon of the carpooling operator.</p> <p>If the carpooling operator supports booking by deep link, the <code>webUrl</code>
attribute in the response SHOULD link to a page giving an overview of the
regular trips (e.g. a &quot;driver&quot; page) and allowing to continue the process of
regular trips by the user.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/standard-covoiturage/" class="prev router-link-active">
        Introduction
      </a></span> <span class="next"><a href="/standard-covoiturage/authentication.html">
        Authentication across platforms (&quot;MaaS Connect&quot;)
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/standard-covoiturage/assets/js/app.bb032a39.js" defer></script><script src="/standard-covoiturage/assets/js/2.3c2e6582.js" defer></script><script src="/standard-covoiturage/assets/js/13.57bfb6e0.js" defer></script>
  </body>
</html>
