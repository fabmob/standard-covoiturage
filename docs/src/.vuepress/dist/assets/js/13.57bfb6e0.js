(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{278:function(e,r,a){"use strict";a.r(r);var t=a(13),o=Object(t.a)({},(function(){var e=this,r=e._self._c;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"search"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#search"}},[e._v("#")]),e._v(" Search")]),e._v(" "),r("div",{staticClass:"language-mermaid extra-class"},[r("pre",{pre:!0,attrs:{class:"language-mermaid"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("sequenceDiagram")]),e._v("\nAlice"),r("span",{pre:!0,attrs:{class:"token arrow operator"}},[e._v("->")]),e._v("John"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" Hello John, how are you?\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("loop")]),e._v(" every minute\n    John"),r("span",{pre:!0,attrs:{class:"token arrow operator"}},[e._v("--\x3e")]),e._v("Alice"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" Great!\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("end")]),e._v("\n")])])]),r("h2",{attrs:{id:"search-for-single-journeys"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#search-for-single-journeys"}},[e._v("#")]),e._v(" Search for single journeys")]),e._v(" "),r("h3",{attrs:{id:"introduction"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#introduction"}},[e._v("#")]),e._v(" Introduction")]),e._v(" "),r("p",[e._v("Search functionalities cover two different possible use cases: a driver can\nsearch for passengers (so, he searches a "),r("code",[e._v("passenger_journey")]),e._v("), or a passenger\ncan search for a driver (looking for a "),r("code",[e._v("driver_journey")]),e._v(").")]),e._v(" "),r("p",[e._v("Each search has its dedicated endpoint and return value. The carpooling\noperator can implement one or the other or both following API endpoints:")]),e._v(" "),r("ul",[r("li",[r("code",[e._v("GET /driver_journeys")]),e._v(" and/or")]),e._v(" "),r("li",[r("code",[e._v("GET /passenger_journeys")])])]),e._v(" "),r("div",{staticClass:"language-mermaid extra-class"},[r("pre",{pre:!0,attrs:{class:"language-mermaid"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("sequenceDiagram")]),e._v("\n    "),r("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("participant")]),e._v(" U as User\n    "),r("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("participant")]),e._v(" M as MaaS\n    "),r("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("participant")]),e._v(" T as TO\n    U"),r("span",{pre:!0,attrs:{class:"token arrow operator"}},[e._v("->>")]),e._v("M"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" Search for journeys\n    "),r("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("rect")]),e._v(" rgb"),r("span",{pre:!0,attrs:{class:"token text string"}},[e._v("(255, 255, 236)")]),e._v("\n    M"),r("span",{pre:!0,attrs:{class:"token arrow operator"}},[e._v("->>")]),e._v("T"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" GET /driver_journeys "),r("span",{pre:!0,attrs:{class:"token text string"}},[e._v("(or /passenger_journeys)")]),e._v("\n    T"),r("span",{pre:!0,attrs:{class:"token arrow operator"}},[e._v("--\x3e>")]),e._v("M"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" DriverJourneys[] "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("or PassengerJourneys[]"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n    "),r("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("end")]),e._v("\n    M"),r("span",{pre:!0,attrs:{class:"token arrow operator"}},[e._v("--\x3e>")]),e._v("U"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" Show results\n")])])]),r("p",[e._v("The search results are queried by the MaaS platform to the carpooling operator\nin a single API call, providing all relevant query informations. The minimum\nrequired information is the starting and arrival places.")]),e._v(" "),r("p",[e._v("In particular, no user information is required to perform a search.")]),e._v(" "),r("p",[e._v("The search provides the necessary information to procede to the booking phase\n(described in other sections). If booking by deep link is supported, the link\nis shared along the journey information in the response's attribute "),r("code",[e._v("webUrl")]),e._v("."),r("br"),e._v("\nIf integrated booking by API is supported, then the journey information plus\nthe "),r("code",[e._v("price")]),e._v(" attribute enable to make a booking request.")]),e._v(" "),r("h3",{attrs:{id:"the-case-of-a-round-trip"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#the-case-of-a-round-trip"}},[e._v("#")]),e._v(" The case of a round trip")]),e._v(" "),r("p",[e._v("If the case of a round trip, it is up to the MaaS platform to perform the\nsearches for the outward and return journeys separately.")]),e._v(" "),r("h3",{attrs:{id:"the-case-of-regular-trips"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#the-case-of-regular-trips"}},[e._v("#")]),e._v(" The case of regular trips")]),e._v(" "),r("p",[e._v("Searching for regular trips has its own specific workflow presented in\n"),r("a",{attrs:{href:"https://github.com/fabmob/standard-covoiturage/blob/spec_search/standard-covoiturage_specification.md#3112-search-for-regular-trips-and-associated-journeys",target:"_blank",rel:"noopener noreferrer"}},[e._v("a dedicated section"),r("OutboundLink")],1),e._v(".")]),e._v(" "),r("h3",{attrs:{id:"technical-specification"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#technical-specification"}},[e._v("#")]),e._v(" Technical specification")]),e._v(" "),r("p",[e._v("The carpooling operator MUST return at most "),r("code",[e._v("count")]),e._v(" matching results, or all\nmatching results if "),r("code",[e._v("count")]),e._v(" parameter is not specified. All returned results\nMUST match the query parameters. If the parameter "),r("code",[e._v("count")]),e._v(" is specified, the\ncarpooling operator SHOULD return in priority the most relevant results. The\nmeasure of relevance is left to the discretion of the carpooling operator.")]),e._v(" "),r("p",[e._v("The "),r("code",[e._v("id")]),e._v(" attribute of the response MUST be unique for a given carpooling\noperator (same "),r("code",[e._v("operator")]),e._v(" attribute) among all journeys ("),r("code",[e._v("passengerJourneys")]),e._v("\nand "),r("code",[e._v("driverJourneys")]),e._v(").")]),e._v(" "),r("p",[e._v("The meaning of "),r("code",[e._v("price")]),e._v(" attribute of the response SHOULD be a price estimation,\nif no estimation is possible, a price with "),r("code",[e._v("type")]),e._v(' "UNKNOWN" SHOULD be\nreturned. If the '),r("code",[e._v("type")]),e._v(' is "PAYING", then the attributes '),r("code",[e._v("amount")]),e._v(" and\n"),r("code",[e._v("currency")]),e._v(" are required.")]),e._v(" "),r("p",[e._v("In the case of integrated booking by API, this estimation is to be taken as\nthe actual amount expected by the carpooling operator. Therefore, the\ncarpooling operator SHOULD return a "),r("code",[e._v("price")]),e._v(' of type "FREE" or "PAYING" to\nallow the MaaS platform to book by API.')]),e._v(" "),r("h2",{attrs:{id:"search-for-regular-trips-and-associated-journeys"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#search-for-regular-trips-and-associated-journeys"}},[e._v("#")]),e._v(" Search for regular trips and associated journeys")]),e._v(" "),r("h3",{attrs:{id:"general-workflow"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#general-workflow"}},[e._v("#")]),e._v(" General workflow")]),e._v(" "),r("p",[e._v("Endpoints implemented by the carpooling operator:")]),e._v(" "),r("ul",[r("li",[r("code",[e._v("GET /driver_regular_trips")]),e._v(" and/or")]),e._v(" "),r("li",[r("code",[e._v("GET /passenger_regular_trips")])])]),e._v(" "),r("p",[e._v("These are the counterparts of the "),r("code",[e._v("GET \\passenger_journeys")]),e._v(" and "),r("code",[e._v("GET \\driver_journeys")]),e._v(" endpoints, but for searching regular trips. The carpooling\noperator can implement one or the other or both API endpoints.")]),e._v(" "),r("p",[e._v("A regular trip is a recurring trip that is repeated from one week to another."),r("br"),e._v("\nThe API allows for searching regular trips that start around the same time of\nthe day at given week days. The query parameters therefore specify an\nadditionnal required "),r("code",[e._v("departureTimeOfDay")]),e._v(", and an optional "),r("code",[e._v("departureWeekdays")]),e._v("\ncompared to the single journey search.")]),e._v(" "),r("p",[e._v("The return values offer a "),r("code",[e._v("schedules")]),e._v(" attribute that details the decomposition\nof the regular trip into single journeys. All attributes combined give the\nsame level of information for the single journeys than a simple search would.")]),e._v(" "),r("p",[e._v("Again, the response gives all the necessary elements to procede with the\nbooking phase as with single journey objects, but with an additionnal optional\n"),r("code",[e._v("webUrl")]),e._v(" attribute, that allows for a better user experience than having to go\nback and forth between the MaaS the carpooling apps as many times as there are\njourneys to book.")]),e._v(" "),r("h3",{attrs:{id:"workflow-for-more-sophisticated-regular-journeys"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#workflow-for-more-sophisticated-regular-journeys"}},[e._v("#")]),e._v(" Workflow for more sophisticated regular journeys")]),e._v(" "),r("p",[e._v("It is up to the MaaS platform to assemble the results of several calls into a\nmore sophisticated regular journey. For instance, a varying\n"),r("code",[e._v("departureTimeOfDay")]),e._v(" depending on week day, or different schedules on\nalternating weeks, can be queried with a large "),r("code",[e._v("timeDelta")]),e._v(" and post-filtering,\nor with several calls with different "),r("code",[e._v("departureTimeOfDay")]),e._v(" and concatenation.")]),e._v(" "),r("h3",{attrs:{id:"technical-specification-for-searching-for-regular-journeys"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#technical-specification-for-searching-for-regular-journeys"}},[e._v("#")]),e._v(" Technical specification for searching for regular journeys")]),e._v(" "),r("p",[e._v("The carpooling operator MUST return at most "),r("code",[e._v("count")]),e._v(" matching results, or all\nmatching results if "),r("code",[e._v("count")]),e._v(" parameter is not specified. All returned results\nMUST match the query parameters.")]),e._v(" "),r("p",[e._v("A regular trip matches the "),r("code",[e._v("departureWeekdays")]),e._v(" and "),r("code",[e._v("departureTimeOfDay")]),e._v(" if\n"),r("em",[e._v("any")]),e._v(" journey of the regular trip matches the time and day constraint and\nstarts between "),r("code",[e._v("minDepartureDate")]),e._v(" and "),r("code",[e._v("maxDepartureDate")]),e._v(" (included).")]),e._v(" "),r("p",[e._v("The returned results may not reach the "),r("code",[e._v("maxDepartureDate")]),e._v(" because of the\nlimited forecasting horizon of the carpooling operator.")]),e._v(" "),r("p",[e._v("If the carpooling operator supports booking by deep link, the "),r("code",[e._v("webUrl")]),e._v('\nattribute in the response SHOULD link to a page giving an overview of the\nregular trips (e.g. a "driver" page) and allowing to continue the process of\nregular trips by the user.')])])}),[],!1,null,null,null);r.default=o.exports}}]);